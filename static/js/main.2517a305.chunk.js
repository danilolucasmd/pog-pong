(this["webpackJsonppog-pong"]=this["webpackJsonppog-pong"]||[]).push([[0],{31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(6),i=n.n(a),c=n(26),r=n.n(c),l=(n(31),n(32),n(33),n(4));n(34);function s(e,t){var n,i=Object(a.useState)(null),c=Object(l.a)(i,2),r=c[0],s=c[1],o=Object(a.useState)(null),u=Object(l.a)(o,2),b=u[0],f=u[1],h=Object(a.useState)(!1),j=Object(l.a)(h,2),y=j[0],v=j[1];return Object(a.useEffect)((function(){return n&&n.unsubscribe(),v(!1),f(null),n=e().subscribe((function(e){s(e),f(null)}),(function(e){f(e),s(null)}),(function(){return v(!0)})),function(){return n.unsubscribe()}}),t),[r,b,y,s]}var o=n(8),u=n(9),b=n(44),f=n(43),h=n(41),j=n(42),y=n(23),v=n(15),m=new(function(){function e(){Object(o.a)(this,e),this.score$=new b.a({player:0,enemy:0})}return Object(u.a)(e,[{key:"getScore",value:function(){return this.score$.asObservable()}},{key:"increasePlayerScore",value:function(){this.score$.next(Object(v.a)(Object(v.a)({},this.score$.value),{},{player:this.score$.value.player+1}))}},{key:"increaseEnemyScore",value:function(){this.score$.next(Object(v.a)(Object(v.a)({},this.score$.value),{},{enemy:this.score$.value.enemy+1}))}},{key:"resetScore",value:function(){this.score$.next({player:0,enemy:0})}}]),e}()),O=0,d=1,x=2,g=3,p=new(function(){function e(){var t=this;Object(o.a)(this,e),this.gameState$=new b.a(O),m.getScore().subscribe((function(e){e.player>=3&&t.win(),e.enemy>=3&&t.lose()}))}return Object(u.a)(e,[{key:"getGameState",value:function(){return this.gameState$.asObservable()}},{key:"getStaticGameState",value:function(){return this.gameState$.value}},{key:"play",value:function(){this.gameState$.value!==d&&(m.resetScore(),this.gameState$.next(d))}},{key:"win",value:function(){this.gameState$.next(x)}},{key:"lose",value:function(){this.gameState$.next(g)}}]),e}()),S=new(function(){function e(){var t=this;Object(o.a)(this,e),this.playerBarY$=new b.a(0),Object(f.a)(document,"mousemove").pipe(Object(h.a)((function(e){return p.getGameState().pipe(Object(j.a)((function(e){return e===d})),Object(y.a)((function(){return e})))}))).subscribe((function(e){var n=document.body.offsetHeight/2,a=e.offsetY-n,i=n-130;a<i?a>-i?t.playerBarY$.next(a):t.playerBarY$.next(-i):t.playerBarY$.next(i)}))}return Object(u.a)(e,[{key:"getPlayerBarY",value:function(){return this.playerBarY$.asObservable()}},{key:"getStaticPlayerBarY",value:function(){return this.playerBarY$.value}}]),e}()),B=n(0),$=function(){var e=s((function(){return S.getPlayerBarY()}),[]),t=Object(l.a)(e,1)[0];return Object(B.jsx)("div",{className:"bar",style:{transform:"translateY(".concat(t,"px)")}})},P={width:15,height:130};function N(e){return Math.floor(Math.random()*e)}var Y=new(function(){function e(){var t=this;Object(o.a)(this,e),this.ballIncreaseRatio=.1,this.ballPosition={x:0,y:0},this.ballDirection={x:1,y:1},this.ballPosition$=new b.a({x:0,y:0}),this.resetBall(),setInterval((function(){if(p.getStaticGameState()===d){var e=(document.body.offsetWidth-P.width)/2,n=(document.body.offsetHeight-P.height)/2,a=S.getStaticPlayerBarY(),i=k.getStaticEnemyBarY();t.ballPosition.x+=t.ballDirection.x,t.ballPosition.y+=t.ballDirection.y,Math.abs(t.ballPosition.x)>e?(t.ballPosition.x<e?m.increasePlayerScore():m.increaseEnemyScore(),t.resetBall()):(t.ballPosition.x>e-2*P.width&&t.isInsideBarVerticalRange(t.ballPosition,a)&&(t.ballDirection.x=-t.ballDirection.x),t.ballPosition.x<-e+2*P.width&&t.isInsideBarVerticalRange(t.ballPosition,i)&&(t.ballDirection.x=-t.ballDirection.x)),Math.abs(t.ballPosition.y)>n&&(t.ballDirection.y=-t.ballDirection.y),t.ballPosition$.next(Object(v.a)({},t.ballPosition))}}),1),setInterval((function(){p.getStaticGameState()===d&&t.increaseBallSpeed()}),1e3)}return Object(u.a)(e,[{key:"getBallPosition",value:function(){return this.ballPosition$.asObservable()}},{key:"resetBall",value:function(){this.ballPosition={x:0,y:0},this.ballDirection={x:0===N(2)?1:-1,y:0===N(2)?1:-1}}},{key:"isInsideBarVerticalRange",value:function(e,t){return e.y>t-P.height/2&&e.y<t+P.height/2}},{key:"increaseBallSpeed",value:function(){this.ballDirection.x<0?this.ballDirection.x-=this.ballIncreaseRatio:this.ballDirection.x+=this.ballIncreaseRatio,this.ballDirection.y<0?this.ballDirection.y-=this.ballIncreaseRatio:this.ballDirection.y+=this.ballIncreaseRatio}}]),e}()),k=new(function(){function e(){var t=this;Object(o.a)(this,e),this.enemyDifficulty=.06,this.enemyBarY$=new b.a(0),Y.getBallPosition().pipe(Object(h.a)((function(e){return p.getGameState().pipe(Object(j.a)((function(e){return e===d})),Object(y.a)((function(){return e})))})),Object(y.a)((function(e){var t=document.body.offsetHeight/2-P.height;return e.y<t?e.y>-t?e.y:-t:t}))).subscribe((function(e){return t.enemyBarY$.next((n=t.enemyBarY$.value,a=e,i=t.enemyDifficulty,n+(a-n)*((i=i<0?0:i)>1?1:i)));var n,a,i}))}return Object(u.a)(e,[{key:"getEnemyBarY",value:function(){return this.enemyBarY$.asObservable()}},{key:"getStaticEnemyBarY",value:function(){return this.enemyBarY$.value}}]),e}()),D=(n(36),function(){var e=s((function(){return k.getEnemyBarY()}),[]),t=Object(l.a)(e,1)[0];return Object(B.jsx)("div",{className:"bar",style:{transform:"translateY(".concat(t,"px)")}})}),w=(n(37),function(){var e=s((function(){return Y.getBallPosition()}),[]),t=Object(l.a)(e,1)[0];return Object(B.jsx)("div",{className:"ball",style:{transform:"translate(".concat(null===t||void 0===t?void 0:t.x,"px, ").concat(null===t||void 0===t?void 0:t.y,"px)")}})}),I=(n(38),function(){var e=s((function(){return m.getScore()}),[]),t=Object(l.a)(e,1)[0];return Object(B.jsxs)("div",{className:"score-container",children:[Object(B.jsx)("div",{className:"score",children:Object(B.jsx)("label",{className:"score-label",children:null===t||void 0===t?void 0:t.enemy})}),Object(B.jsx)("div",{className:"score",children:Object(B.jsx)("label",{className:"score-label",children:null===t||void 0===t?void 0:t.player})})]})}),E=(n(39),function(){var e=s((function(){return p.getGameState()}),[]),t=Object(l.a)(e,1)[0];return Object(B.jsxs)("div",{className:"game-info",children:[t===O&&Object(B.jsx)("label",{className:"game-state-label",children:"START"}),t===x&&Object(B.jsx)("label",{className:"game-state-label",children:"WIN"}),t===g&&Object(B.jsx)("label",{className:"game-state-label",children:"LOSE"})]})}),G=function(){return Object(B.jsxs)("div",{className:"playfield",children:[Object(B.jsx)("div",{className:"top"}),Object(B.jsxs)("div",{className:"middle",children:[Object(B.jsx)(D,{}),Object(B.jsx)("div",{className:"dotted-line"}),Object(B.jsx)(w,{}),Object(B.jsx)($,{})]}),Object(B.jsx)("div",{className:"bottom"}),Object(B.jsx)(I,{}),Object(B.jsx)(E,{})]})};var R=function(){return Object(a.useEffect)((function(){document.addEventListener("click",(function(){p.play()}))}),[]),Object(B.jsxs)("div",{className:"container",children:[Object(B.jsx)("div",{className:"header",children:Object(B.jsx)("label",{className:"game-name",children:"POG PONG"})}),Object(B.jsx)(G,{})]})},M=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,45)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),i(e),c(e),r(e)}))};r.a.render(Object(B.jsx)(i.a.StrictMode,{children:Object(B.jsx)(R,{})}),document.getElementById("root")),M()}},[[40,1,2]]]);
//# sourceMappingURL=main.2517a305.chunk.js.map